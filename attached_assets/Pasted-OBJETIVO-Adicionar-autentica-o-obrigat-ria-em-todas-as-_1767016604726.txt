OBJETIVO: Adicionar autenticação obrigatória em todas as rotas de pacientes (GET, POST, PATCH, DELETE) para proteger dados sensíveis conforme LGPD.

CONTEXTO: Atualmente as rotas /api/patients/* estão públicas, permitindo que qualquer pessoa acesse dados sensíveis de pacientes sem autenticação. Isso é uma violação grave da LGPD Art. 46.

ARQUIVOS A MODIFICAR:
1. server/routes.ts

INSTRUÇÕES DETALHADAS:

1. No arquivo server/routes.ts, localize as seguintes rotas de pacientes:
   - app.get("/api/patients", ...)
   - app.get("/api/patients/:id", ...)
   - app.post("/api/patients", ...)
   - app.patch("/api/patients/:id", ...)
   - app.delete("/api/patients/:id", ...)

2. Adicione o middleware authMiddleware ANTES de asyncHandler em CADA uma dessas rotas.

3. Adicione também requireRole('admin', 'enfermagem') para controle de acesso baseado em função.

CÓDIGO A APLICAR:

Substitua:
```typescript
app.get("/api/patients", asyncHandler(async (req, res, next) => {
  const patients = await storage.getAllPatients();
  // ... resto do código
}));
```

Por:
```typescript
app.get("/api/patients", 
  authMiddleware, 
  requireRole('admin', 'enfermagem'),
  asyncHandler(async (req, res, next) => {
    const patients = await storage.getAllPatients();
    // ... resto do código
  })
);
```

Repita o mesmo padrão para:
- GET /api/patients/:id
- POST /api/patients
- PATCH /api/patients/:id
- DELETE /api/patients/:id

VALIDAÇÃO APÓS APLICAR:
1. Tente acessar http://localhost:5000/api/patients sem token - deve retornar 401 Unauthorized
2. Faça login e acesse com token válido - deve funcionar normalmente
3. Verifique que usuários com role 'enfermagem' conseguem acessar
4. Teste criar, editar e deletar pacientes com autenticação

IMPORTANTE:
- NÃO modifique a lógica interna das rotas
- NÃO altere os validadores (insertPatientSchema)
- NÃO modifique o formato das respostas
- Apenas adicione os middlewares de autenticação

CHECKLIST DE SEGURANÇA:
☐ GET /api/patients requer autenticação
☐ GET /api/patients/:id requer autenticação
☐ POST /api/patients requer autenticação
☐ PATCH /api/patients/:id requer autenticação
☐ DELETE /api/patients/:id requer autenticação
☐ Todas retornam 401 se sem token
☐ Funcionalidade existente não foi alterada